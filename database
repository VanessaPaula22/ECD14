from typing import List, Optional
from .models import Contact, ContactCreate, Phone

contacts_db: List[Contact] = []
next_id = 1

def add_contact(contact_data: ContactCreate) -> Contact:
    global next_id
    contact = Contact(id=next_id, **contact_data.dict())
    contacts_db.append(contact)
    next_id += 1
    return contact

def get_contact(contact_id: int) -> Optional[Contact]:
    return next((c for c in contacts_db if c.id == contact_id), None)

def list_contacts() -> List[Contact]:
    return contacts_db