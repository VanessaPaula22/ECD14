from fastapi import FastAPI, HTTPException
from .models import Contact, ContactCreate
from .database import add_contact, get_contact, list_contacts

app = FastAPI(title="Agenda de Contatos")

@app.post("/contacts", response_model=Contact)
def create_contact(contact: ContactCreate):
    return add_contact(contact)

@app.get("/contacts/{contact_id}", response_model=Contact)
def read_contact(contact_id: int):
    contact = get_contact(contact_id)
    if not contact:
        raise HTTPException(status_code=404, detail="Contato n√£o encontrado")
    return contact

@app.get("/contacts", response_model=list[Contact])
def read_contacts():
    return list_contacts()